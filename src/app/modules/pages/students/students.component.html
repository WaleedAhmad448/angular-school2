<div class="card flex justify-content-center">
    <p-breadcrumb class="max-w-full" [model]="items">
        <ng-template pTemplate="item" let-item>
            <ng-container *ngIf="item.route; else elseBlock">
                <a [routerLink]="item.route" class="p-menuitem-link">
                    <span [ngClass]="[item.icon ? item.icon : '', 'text-color']"></span>
                    <span class="text-primary font-semibold">{{ item.label }}</span>
                </a>
            </ng-container>
            <ng-template #elseBlock>
                <a [href]="item.url">
                    <span class="text-color">{{ item.label }}</span>
                </a>
            </ng-template>
        </ng-template>
    </p-breadcrumb>
</div>

<app-page-heading
    *ngIf="headerOptions"
    [pageHeaderOptions]="headerOptions"
></app-page-heading>

<div class="p-4" *ngIf="!isAddingStudent">
  <div class="flex justify-between items-center mb-4">
    <div class="flex gap-2">
      <p-inputGroup>
        <p-inputIcon name="pi pi-search"></p-inputIcon>
        <input type="text" pInputText [(ngModel)]="Search" (input)="onSearch()" placeholder="Search" style="width: 320px">
      </p-inputGroup>
      <p-button icon="pi pi-plus" label="Add Student" styleClass="p-button-success" (click)="openCreateDialog()"></p-button>
    </div>
  
    <div class="flex gap-2">
      <p-button icon="pi pi-upload" label="Import" styleClass="p-button-help" (click)="triggerFileInput()"></p-button>
      <input id="importFileInput" type="file" #importFileInput hidden (change)="onFileChange($event)" accept=".xlsx,.xls">
      <p-button icon="pi pi-download" label="Export" styleClass="p-button-info" (click)="exportToExcel()"></p-button>
    </div>
  </div>
</div>

<!-- Data table -->
<div *ngIf="!isAddingStudent" class="p-4">
  <p-table [value]="students || []" [paginator]="true" [rows]="10" [showCurrentPageReport]="true" 
    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
    [rowsPerPageOptions]="[10,25,50]" [tableStyle]="{'min-width': '60rem'}">
    <ng-template pTemplate="header">
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Nrc No</th>
        <th>Age</th>
        <th>Gender</th>
        <th>Actions</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-student>
      <tr>
        <td>{{ student.studentId }}</td>
        <td>{{ student.studentName }}</td>
        <td>{{ student.studentNrc }}</td>
        <td>{{ student.age }}</td>
        <td>{{ student.gender }}</td>
        <td>
          <div class="flex gap-2">
            <p-button icon="pi pi-trash" styleClass="p-button-danger p-button-sm" 
              (click)="openDeleteDialog(student.studentId)"></p-button>
            <p-button icon="pi pi-info-circle" styleClass="p-button-outlined p-button-sm" 
              [routerLink]="['../student/details', student.studentId]"></p-button>
          </div>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>